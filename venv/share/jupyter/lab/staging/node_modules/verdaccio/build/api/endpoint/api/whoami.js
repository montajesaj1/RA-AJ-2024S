"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;
function _default(route) {
  route.get('/whoami', (req, res, next) => {
    if (req.get('referer') === 'whoami') {
      next({
        username: req.remote_user.name
      });
    } else {
      next('route');
    }
  });
  route.get('/-/whoami', (req, res, next) => {
    next({
      username: req.remote_user.name
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZGVmYXVsdCIsInJvdXRlIiwiZ2V0IiwicmVxIiwicmVzIiwibmV4dCIsInVzZXJuYW1lIiwicmVtb3RlX3VzZXIiLCJuYW1lIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2FwaS9lbmRwb2ludC9hcGkvd2hvYW1pLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlc3BvbnNlLCBSb3V0ZXIgfSBmcm9tICdleHByZXNzJztcblxuaW1wb3J0IHsgJE5leHRGdW5jdGlvblZlciwgJFJlcXVlc3RFeHRlbmQgfSBmcm9tICcuLi8uLi8uLi90eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChyb3V0ZTogUm91dGVyKTogdm9pZCB7XG4gIHJvdXRlLmdldCgnL3dob2FtaScsIChyZXE6ICRSZXF1ZXN0RXh0ZW5kLCByZXM6IFJlc3BvbnNlLCBuZXh0OiAkTmV4dEZ1bmN0aW9uVmVyKTogdm9pZCA9PiB7XG4gICAgaWYgKHJlcS5nZXQoJ3JlZmVyZXInKSA9PT0gJ3dob2FtaScpIHtcbiAgICAgIG5leHQoeyB1c2VybmFtZTogcmVxLnJlbW90ZV91c2VyLm5hbWUgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5leHQoJ3JvdXRlJyk7XG4gICAgfVxuICB9KTtcblxuICByb3V0ZS5nZXQoJy8tL3dob2FtaScsIChyZXE6ICRSZXF1ZXN0RXh0ZW5kLCByZXM6IFJlc3BvbnNlLCBuZXh0OiAkTmV4dEZ1bmN0aW9uVmVyKTogYW55ID0+IHtcbiAgICBuZXh0KHsgdXNlcm5hbWU6IHJlcS5yZW1vdGVfdXNlci5uYW1lIH0pO1xuICB9KTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBSWUsU0FBQUEsU0FBVUMsS0FBYSxFQUFRO0VBQzVDQSxLQUFLLENBQUNDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQ0MsR0FBbUIsRUFBRUMsR0FBYSxFQUFFQyxJQUFzQixLQUFXO0lBQ3pGLElBQUlGLEdBQUcsQ0FBQ0QsR0FBRyxDQUFDLFNBQVMsQ0FBQyxLQUFLLFFBQVEsRUFBRTtNQUNuQ0csSUFBSSxDQUFDO1FBQUVDLFFBQVEsRUFBRUgsR0FBRyxDQUFDSSxXQUFXLENBQUNDO01BQUssQ0FBQyxDQUFDO0lBQzFDLENBQUMsTUFBTTtNQUNMSCxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ2Y7RUFDRixDQUFDLENBQUM7RUFFRkosS0FBSyxDQUFDQyxHQUFHLENBQUMsV0FBVyxFQUFFLENBQUNDLEdBQW1CLEVBQUVDLEdBQWEsRUFBRUMsSUFBc0IsS0FBVTtJQUMxRkEsSUFBSSxDQUFDO01BQUVDLFFBQVEsRUFBRUgsR0FBRyxDQUFDSSxXQUFXLENBQUNDO0lBQUssQ0FBQyxDQUFDO0VBQzFDLENBQUMsQ0FBQztBQUNKIn0=