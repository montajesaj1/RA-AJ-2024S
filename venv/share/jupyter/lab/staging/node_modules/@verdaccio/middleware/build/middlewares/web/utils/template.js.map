{"version":3,"file":"template.js","names":["_debug","_interopRequireDefault","require","_manifest","obj","__esModule","default","debug","buildDebug","renderTemplate","template","manifest","_template$options$tit","_template$options","options","base","title","JSON","stringify","metaScripts","join","scriptsbodyBefore","getManifestValue","js","map","item","scriptsBodyAfter"],"sources":["../../../../src/middlewares/web/utils/template.ts"],"sourcesContent":["import buildDebug from 'debug';\n\nimport { TemplateUIOptions } from '@verdaccio/types';\n\nimport { Manifest, getManifestValue } from './manifest';\n\nconst debug = buildDebug('verdaccio:web:render:template');\n\nexport type Template = {\n  manifest: Manifest;\n  options: TemplateUIOptions;\n  metaScripts?: string[];\n  scriptsBodyAfter?: string[];\n  scriptsbodyBefore?: string[];\n};\n\n// the outcome of the Webpack Manifest Plugin\nexport interface WebpackManifest {\n  [key: string]: string;\n}\n\nexport default function renderTemplate(template: Template, manifest: WebpackManifest) {\n  debug('template %o', template);\n  debug('manifest %o', manifest);\n\n  return `\n    <!DOCTYPE html>\n      <html lang=\"en-us\"> \n      <head>\n        <meta charset=\"utf-8\">\n        <base href=\"${template?.options.base}\">\n        <title>${template?.options?.title ?? ''}</title>        \n        <link rel=\"icon\" href=\"${template?.options.base}-/static/favicon.ico\"/>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" /> \n        <script>\n            window.__VERDACCIO_BASENAME_UI_OPTIONS=${JSON.stringify(template.options)}\n        </script>\n        ${template?.metaScripts ? template.metaScripts.join('') : ''}\n      </head>    \n      <body class=\"body\">\n      ${template?.scriptsbodyBefore ? template.scriptsbodyBefore.join('') : ''}\n        <div id=\"root\"></div>\n        ${getManifestValue(template.manifest.js, manifest, template?.options.base)\n          .map((item) => `<script defer=\"defer\" src=\"${item}\"></script>`)\n          .join('')}\n        ${template?.scriptsBodyAfter ? template.scriptsBodyAfter.join('') : ''}\n      </body>\n    </html>\n  `;\n}\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AAIA,IAAAC,SAAA,GAAAD,OAAA;AAAwD,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAExD,MAAMG,KAAK,GAAG,IAAAC,cAAU,EAAC,+BAA+B,CAAC;;AAUzD;;AAKe,SAASC,cAAcA,CAACC,QAAkB,EAAEC,QAAyB,EAAE;EAAA,IAAAC,qBAAA,EAAAC,iBAAA;EACpFN,KAAK,CAAC,aAAa,EAAEG,QAAQ,CAAC;EAC9BH,KAAK,CAAC,aAAa,EAAEI,QAAQ,CAAC;EAE9B,OAAQ;AACV;AACA;AACA;AACA;AACA,sBAAsBD,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEI,OAAO,CAACC,IAAK;AAC7C,iBAAe,CAAAH,qBAAA,GAAEF,QAAQ,aAARA,QAAQ,wBAAAG,iBAAA,GAARH,QAAQ,CAAEI,OAAO,cAAAD,iBAAA,uBAAjBA,iBAAA,CAAmBG,KAAK,cAAAJ,qBAAA,cAAAA,qBAAA,GAAI,EAAG;AAChD,iCAAiCF,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEI,OAAO,CAACC,IAAK;AACxD;AACA;AACA,qDAAqDE,IAAI,CAACC,SAAS,CAACR,QAAQ,CAACI,OAAO,CAAE;AACtF;AACA,UAAUJ,QAAQ,aAARA,QAAQ,eAARA,QAAQ,CAAES,WAAW,GAAGT,QAAQ,CAACS,WAAW,CAACC,IAAI,CAAC,EAAE,CAAC,GAAG,EAAG;AACrE;AACA;AACA,QAAQV,QAAQ,aAARA,QAAQ,eAARA,QAAQ,CAAEW,iBAAiB,GAAGX,QAAQ,CAACW,iBAAiB,CAACD,IAAI,CAAC,EAAE,CAAC,GAAG,EAAG;AAC/E;AACA,UAAU,IAAAE,0BAAgB,EAACZ,QAAQ,CAACC,QAAQ,CAACY,EAAE,EAAEZ,QAAQ,EAAED,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEI,OAAO,CAACC,IAAI,CAAC,CACvES,GAAG,CAAEC,IAAI,IAAM,8BAA6BA,IAAK,aAAY,CAAC,CAC9DL,IAAI,CAAC,EAAE,CAAE;AACpB,UAAUV,QAAQ,aAARA,QAAQ,eAARA,QAAQ,CAAEgB,gBAAgB,GAAGhB,QAAQ,CAACgB,gBAAgB,CAACN,IAAI,CAAC,EAAE,CAAC,GAAG,EAAG;AAC/E;AACA;AACA,GAAG;AACH"}